import{b as F,l as P,k as T,j as v,o as w}from"./element-plus-3005ffeb.js";import{c as x}from"./@vueuse-10e59691.js";import{r as B,O as _,o as N,c as j,S as e,V as o,u as q,F as D,Z as m,a as f,_ as I}from"./@vue-5b74f5fb.js";import"./lodash-es-077bc1f4.js";import"./async-validator-7f96df71.js";import"./@element-plus-fcbd27ab.js";import"./@ctrl-f8748455.js";import"./@popperjs-c45de710.js";const S=f("p",null,"可以打开控制台查看logs",-1),U={class:"dialog-footer"},L={__name:"useTemplatePromise",setup($){const u=B(null),a=_({name:"张三",age:10}),g=_({name:{required:!0,trigger:"blur",message:"请输入姓名"},age:{required:!0,trigger:"blur",message:"请输入年龄"}}),i=x(),V=async()=>{const l=await i.start("新增");console.log(l)},k=async l=>new Promise(t=>{l.validate((n,s)=>{n?(console.log("校验通过"),t(b())):(console.log("校验失败",s),t(!1))})}),b=()=>new Promise(l=>{setTimeout(()=>{l(!0)},1e5)});return(l,t)=>{const n=F,s=P,c=T,y=v,C=w;return N(),j(D,null,[e(n,{onClick:V},{default:o(()=>[m("打开弹框")]),_:1}),e(q(i),null,{default:o(({promise:O,resolve:d,reject:R,args:E,isResolving:p})=>[e(C,{modelValue:!0,title:E[0],center:""},{footer:o(()=>[f("div",U,[e(n,{onClick:r=>d("cancel")},{default:o(()=>[m(" 取消 ")]),_:2},1032,["onClick"]),e(n,{type:"primary",disabled:p,onClick:r=>d(k(u.value))},{default:o(()=>[m(I(p?"loading...":"确定"),1)]),_:2},1032,["disabled","onClick"])])]),default:o(()=>[S,e(y,{ref_key:"formRef",ref:u,model:a,rules:g},{default:o(()=>[e(c,{label:"姓名",prop:"name"},{default:o(()=>[e(s,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=r=>a.name=r)},null,8,["modelValue"])]),_:1}),e(c,{label:"年龄",prop:"age"},{default:o(()=>[e(s,{modelValue:a.age,"onUpdate:modelValue":t[1]||(t[1]=r=>a.age=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:2},1032,["title"])]),_:1})],64)}}};export{L as default};
